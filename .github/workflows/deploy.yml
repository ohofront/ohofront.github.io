build:
  runs-on: ubuntu-latest

  steps:
    - name: 📂 Checkout Repository
      uses: actions/checkout@v4

    - name: ⚙️ Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: 20
        cache: npm

    - name: 📦 Install Dependencies
      run: npm ci

    - name: 🔨 Build Project (Vite 빌드 실행)
      run: npm run build

    - name: 📄 Create CNAME file (Custom Domain 설정)
      run: echo "www.ohorang.com" > dist/CNAME

    - name: 🚀 Upload Artifact (GitHub Pages 배포할 파일 업로드)
      uses: actions/upload-artifact@v4
      with:
        path: ./dist

deploy:
  needs: build
  runs-on: ubuntu-latest
  environment:
    name: github-pages
    url: ${{ steps.deployment.outputs.page_url }}

  steps:
    - name: 🚀 Download Artifact (빌드된 파일 다운로드)
      uses: actions/download-artifact@v4
      with:
        path: ./dist

    - name: 🚀 Deploy to GitHub Pages (GitHub Actions을 통해 배포)
      id: deployment
      uses: actions/deploy-pages@v2
